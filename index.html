<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Advent Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #0b1724;
      --card-bg: #152235;
      --accent: #e63946;
      --accent-soft: #f1faee;
      --gold: #f4c95d;
      --locked: #4a5568;
      --text: #f9fafb;
      --secondary-text: #cbd5f5;
      --shadow: 0 18px 35px rgba(0, 0, 0, 0.35);
      --radius: 12px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 24px 16px 40px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;

      background:
        linear-gradient(to bottom, rgba(0, 0, 0, 0.10), rgba(0, 0, 0, 0.15)),
        url("bg.jpg") center/cover no-repeat;

      color: var(--text);
      display: flex;
      min-height: 100vh;
      align-items: flex-start;
      justify-content: center;
    }

    @media (min-width: 900px) {
      body {
        padding: 32px 24px;
        align-items: center;
      }
    }

    .calendar-wrapper {
      max-width: 2000px;
      width: 100%;
      margin: 0 auto;
      position: relative;
    }

    .calendar-header {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: baseline;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    @media (max-width: 600px) {
      .calendar-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
    }

    .calendar-title {
      font-size: clamp(1.6rem, 2.2vw + 1rem, 2.2rem);
      font-weight: 700;
      letter-spacing: 0.04em;
      display: flex;
      align-items: center;
      gap: 0.55rem;
    }

    .calendar-title span.emoji {
      font-size: 1.8rem;
    }

    .calendar-subtitle {
      font-size: 0.9rem;
      color: var(--secondary-text);
      max-width: 480px;
    }

    .today-indicator {
      font-size: 0.9rem;
      color: var(--gold);
      display: flex;
      gap: 6px;
      align-items: center;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(245, 158, 11, 0.08);
      border: 1px solid rgba(245, 158, 11, 0.3);
      white-space: nowrap;
    }

    @media (max-width: 600px) {
      .today-indicator {
        margin-top: 4px;
      }
    }

    .today-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--gold);
      box-shadow: 0 0 10px rgba(250, 204, 21, 0.75);
    }

    /* ------- GRID LAYOUT -------- */

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(8, minmax(80px, 1fr));
      grid-auto-rows: clamp(80px, 9vw, 130px);
      grid-auto-flow: dense;
      gap: clamp(8px, 1vw, 16px);
    }

    @media (max-width: 1200px) {
      .calendar-grid {
        grid-template-columns: repeat(6, minmax(80px, 1fr));
      }
    }

    @media (max-width: 900px) {
      .calendar-grid {
        grid-template-columns: repeat(5, minmax(70px, 1fr));
        grid-auto-rows: clamp(80px, 11vw, 120px);
      }
    }

    @media (max-width: 768px) {
      .calendar-grid {
        grid-template-columns: repeat(4, minmax(70px, 1fr));
        grid-auto-rows: clamp(90px, 18vw, 130px);
      }
    }

    @media (max-width: 520px) {
      .calendar-grid {
        grid-template-columns: repeat(3, minmax(80px, 1fr));
        grid-auto-rows: 110px;
      }
    }

    .door--size-s {
      grid-column: span 1;
      grid-row: span 1;
    }

    .door--size-wide {
      grid-column: span 2;
      grid-row: span 1;
    }

    .door--size-tall {
      grid-column: span 1;
      grid-row: span 2;
    }

    .door--size-big {
      grid-column: span 2;
      grid-row: span 2;
    }

    @media (max-width: 520px) {
      .door--size-s,
      .door--size-wide,
      .door--size-tall,
      .door--size-big {
        grid-column: span 1;
        grid-row: span 1;
      }
    }

    .door {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: var(--radius);
      background-size: 100% 100%;
      background-position: center;
      background-repeat: no-repeat;
      background-color: transparent;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.65);
      padding: 10px;
      cursor: default;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      transition:
        transform 0.18s ease,
        box-shadow 0.18s ease,
        border-color 0.18s ease,
        background 0.18s ease,
        filter 0.18s ease;
    }

    @media (max-width: 520px) {
      .door {
        padding: 8px;
      }
    }

    .door * {
      position: relative;
      z-index: 3;
    }

    /* Grey-out past doors */
    .door.past {
      filter: grayscale(0.4) brightness(0.9);
    }

    .door.past::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      pointer-events: none;
      z-index: 2;
    }

    .door.past .door-status {
      background: rgba(31, 41, 55, 0.9);
      border-color: rgba(148, 163, 184, 0.7);
    }

    .door::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        135deg,
        rgba(251, 191, 36, 0.28),
        rgba(248, 250, 252, 0.02)
      );
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.18s ease;
    }

    .door.available {
      cursor: pointer;
    }

    .door.available:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 16px 35px rgba(15, 23, 42, 0.9);
      border-color: rgba(248, 250, 252, 0.6);
    }

    .door.available:hover::before {
      opacity: 1;
    }

    .door.locked {
      border-style: dashed;
      border-color: rgba(148, 163, 184, 0.5);
      background: radial-gradient(circle at 20% 0, #111827, #020617);
    }

    .door-number {
      font-size: 2rem;
      font-weight: 900;
      color: var(--accent-soft);
      align-self: flex-start;
      padding: 4px 14px;
      border-radius: 12px;
      background: linear-gradient(
        120deg,
        rgba(248, 250, 252, 0.12),
        rgba(248, 250, 252, 0.02)
      );
      backdrop-filter: blur(6px);
    }

    @media (max-width: 520px) {
      .door-number {
        font-size: 1.1rem;
        padding: 3px 8px;
      }
    }

    .door-label {
      font-size: 3rem;
      font-weight: 900;
      color: black;
      text-transform: none;
      letter-spacing: 0.02em;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      -webkit-text-stroke: 2px #f4c95d;
      text-stroke: 2px #f4c95d;
      text-shadow:
        0 0 8px rgba(244, 201, 93, 0.9),
        0 0 15px rgba(244, 201, 93, 0.6),
        0 0 22px rgba(244, 201, 93, 0.4);
      z-index: 3;
      pointer-events: none;
    }

    @media (max-width: 520px) {
      .door-label {
        font-size: 1.8rem;
      }
    }

    .door-footer {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.7rem;
      color: var(--secondary-text);
      opacity: 0.9;
      gap: 4px;
    }

    @media (max-width: 520px) {
      .door-footer {
        font-size: 0.65rem;
      }
    }

    .door-status {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.6);
    }

    .door-status span.icon {
      font-size: 0.9rem;
    }

    .door.locked .door-status {
      border-color: rgba(156, 163, 175, 0.6);
    }

    .door.available .door-status {
      border-color: rgba(248, 250, 252, 0.7);
      background: rgba(22, 163, 74, 0.08);
    }

    .door-tag {
      padding: 3px 6px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.12);
      border: 1px solid rgba(191, 219, 254, 0.4);
      white-space: nowrap;
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.72);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .modal-backdrop.visible {
      display: flex;
    }

    .modal {
      width: min(1280px, 100vw - 32px);
      max-height: min(1280px, 90vh);
      background: radial-gradient(circle at top, #1f2937, #020617);
      padding: 24px 26px 20px;
      border-radius: 20px;
      border: 1px solid rgba(191, 219, 254, 0.5);
      box-shadow: 0 30px 70px rgba(0, 0, 0, 0.75);
      position: relative;
      color: var(--text);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 12px;
      margin-bottom: 4px;
    }

    .modal-title {
      font-size: 1.2rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-title span.badge {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 4px 7px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.08);
      border: 1px solid rgba(22, 163, 74, 0.4);
      color: #bbf7d0;
    }

    .modal-close {
      border: none;
      background: transparent;
      color: var(--secondary-text);
      font-size: 1.4rem;
      cursor: pointer;
      padding: 0;
      line-height: 1;
      transition: transform 0.1s ease, color 0.1s ease;
    }

    .modal-close:hover {
      transform: scale(1.1);
      color: #e5e7eb;
    }

    .modal-body {
      font-size: 0.95rem;
      color: var(--secondary-text);
      line-height: 1.5;
      overflow-y: auto;
      padding-right: 4px;
    }

    .modal-body a {
      color: #93c5fd;
      text-decoration: none;
    }

    .modal-body a:hover {
      text-decoration: underline;
    }

    .modal-footer {
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      font-size: 0.78rem;
      color: var(--secondary-text);
      opacity: 0.9;
    }

    @media (max-width: 520px) {
      .modal-footer {
        flex-direction: column;
        gap: 6px;
      }
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.7);
    }

    .pill span.icon {
      font-size: 0.9rem;
    }

    .sparkles {
      pointer-events: none;
      position: absolute;
      inset: 0;
      mix-blend-mode: screen;
      background-image: radial-gradient(
          circle at 10% 20%,
          rgba(255, 255, 255, 0.35) 0,
          transparent 40%
        ),
        radial-gradient(
          circle at 80% 10%,
          rgba(255, 255, 255, 0.28) 0,
          transparent 42%
        ),
        radial-gradient(
          circle at 30% 80%,
          rgba(255, 255, 255, 0.25) 0,
          transparent 40%
        );
      background-size: 380px 380px;
      animation: drift 35s linear infinite alternate;
      opacity: 0.4;
    }

    @keyframes drift {
      from {
        transform: translate3d(-10px, 10px, 0);
      }
      to {
        transform: translate3d(10px, -10px, 0);
      }
    }

    /* Secret message styles */
    .secret-message-container {
      text-align: center;
      padding: 20px;
    }

    .secret-input {
      padding: 10px;
      font-size: 16px;
      border: 2px solid var(--gold);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      margin: 10px 0;
    }

    .fireplace-container {
      text-align: center;
    }

    .fireplace-iframe {
      width: 100%;
      max-width: 560px;
      height: 315px;
      border: none;
      border-radius: 12px;
    }

    .memory-photo {
      max-width: 100%;
      border-radius: 14px;
      margin: 10px 0;
    }

    .hug-card {
      text-align: center;
      padding: 20px;
      background: linear-gradient(135deg, rgba(230, 57, 70, 0.1), rgba(244, 201, 93, 0.1));
      border-radius: 12px;
      border: 1px solid rgba(244, 201, 93, 0.3);
    }
  </style>
</head>
<body>
  <div class="calendar-wrapper">
    <div class="sparkles" aria-hidden="true"></div>

    <header class="calendar-header">
      <div>
        <div class="calendar-title">
          <span class="emoji">üéÑ</span>
          <span>Nancy's Advent Calendar</span>
        </div>
        <div class="calendar-subtitle">
          Come back each day to open a new door and reveal today's surprise.
        </div>
      </div>
      <div class="today-indicator" id="todayIndicator">
        <span class="today-dot"></span>
        <span id="todayText">Today: ‚Äî</span>
      </div>
    </header>

    <main class="calendar-grid" id="calendarGrid"></main>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">
          <span id="modalEmoji">üéÅ</span>
          <span id="modalTitleText">Day X</span>
          <span class="badge" id="modalBadge">Unlocked</span>
        </h2>
        <button class="modal-close" id="modalClose" aria-label="Close">
          &times;
        </button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer">
        <div class="pill">
          <span class="icon">üìÖ</span>
          <span id="modalDayLabel">Door X</span>
        </div>
        <div class="pill">
          <span class="icon">‚ú®</span>
          <span>Come back tomorrow for more</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- CONFIG: content for each day ---
    const doorContent = {
        1: {
        title: "Day 1 ‚Äì Welcome to Your Calendar",
        emoji: "üéÅ",
        html: `
          <div class="secret-message-container">
            <img src="inside-1.gif" alt="Welcome animation" class="welcome-gif">
            <h3>Hi S√º√üe üíñ</h3>
            <p>Welcome to your first advent calendar! For the next 24 days, I will surprise you a little bit every day.</p>
            <p>I will also remind you every day of why I love you.</p>
            <div style="background: rgba(244, 201, 93, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
              <p><strong>1.</strong> I love the way you support me and when tell me that you are proud of me</p>
            </div>
            <p>For your first surprise, type three magical words in here:</p>
            <input type="text" class="secret-input" placeholder="Type the magic words..." id="secretInput">
            <audio id="loveMessage" src="day1.m4a" preload="auto"></audio>
          </div>
        `,
      },

       2: {
        title: "Day 2 ‚Äì Cozy Fireplace",
        emoji: "üî•",
        html: `
          <div class="fireplace-container">
            <p>Let's get cozy and pretend we're curled up together.</p>
            <video class="fireplace-iframe" controls autoplay muted loop style="width: 100%; max-width: 560px; height: 315px; border-radius: 12px;">
              <source src="fireplace-video.mp4" type="video/mp4">
            </video>
            
            <div style="text-align: center; margin: 25px 0;">
              <div style="background: rgba(244, 201, 93, 0.1); padding: 20px; border-radius: 12px; display: inline-block;">
                <p style="margin: 0; font-size: 1.2em;"><strong>2.</strong> I love that you didn't give up on me</p>
              </div>
            </div>

            <audio id="fireplaceAudio" autoplay loop>
              <source src="fireplace-audio.mp4" type="audio/mp4">
            </audio>
          </div>
          <script>
            // Attempt to play audio when modal opens
            setTimeout(() => {
              const audio = document.getElementById('fireplaceAudio');
              if (audio) {
                audio.play().catch(e => {
                  console.log('Autoplay with sound was blocked');
                });
              }
            }, 1000);
          <\/script>
        `,
      },

      3: {
        title: "Day 3 ‚Äì A Memory in a Photo",
        emoji: "üì∏",
        html: `
          <div style="text-align: center;">
            <img src="path/to/your-memory-photo.jpg" alt="Our special memory" class="memory-photo">
            <p><strong>Do you remember this day?</strong></p>
            <p>I was just looking at this photo and remembering how [describe the memory - what you were doing, how you felt, a funny detail]. 
            The way you [specific thing she did] made me realize [something heartfelt]. 
            This memory lives rent-free in my mind because it captures exactly why I love being with you.</p>
          </div>
        `,
      },

      4: {
        title: "Day 4 ‚Äì Virtual Hug",
        emoji: "ü§ó",
        html: `
          <div class="hug-card">
            <div style="font-size: 4rem; margin: 20px 0;">ü´Ç</div>
            <h3>Sending you the warmest, tightest virtual hug today.</h3>
            <p>I know it's not the same as the real thing, but imagine me wrapping my arms around you, 
            resting my chin on your head, and holding you close. Whatever today brings, 
            remember I'm always here for you.</p>
          </div>
        `,
      },

      5: {
        title: "Day 5 ‚Äì Collaborative Drawing",
        emoji: "üé®",
        html: `
          <div style="text-align: center;">
            <p>Our shared canvas is waiting. Let's create something together!</p>
            <p>I've started with a little heart for us. Add to it, draw something silly, 
            or just scribble - it's our space to create together.</p>
            <a href="https://aggie.io" target="_blank" 
               style="display: inline-block; padding: 12px 24px; background: var(--accent); 
                      color: white; text-decoration: none; border-radius: 8px; margin: 15px 0;">
              üé® Open Our Canvas
            </a>
            <p><small>I'll be checking in throughout the day to see what you've added! üíï</small></p>
          </div>
        `,
      },

      6: {
        title: "Day 6 ‚Äì What I See In You",
        emoji: "üí´",
        html: `
          <div style="text-align: center;">
            <p>A small reminder of how incredible you truly are:</p>
            <div style="background: rgba(244, 201, 93, 0.1); padding: 20px; border-radius: 12px; margin: 15px 0;">
              <ul style="text-align: left; display: inline-block;">
                <li>Your incredible strength when facing challenges</li>
                <li>The way your eyes light up when you talk about things you love</li>
                <li>Your kindness that you show to everyone around you</li>
                <li>That specific laugh that makes me smile every time</li>
                <li>Your passion for [her specific interest/hobby]</li>
                <li>The way you make ordinary moments feel magical</li>
              </ul>
            </div>
            <p>And so many more things I could list forever... üíñ</p>
          </div>
        `,
      },

      7: {
        title: "Day 7 ‚Äì Cozy Evening Prescription",
        emoji: "üìú",
        html: `
          <div style="text-align: center; background: rgba(148, 163, 184, 0.1); padding: 20px; border-radius: 12px;">
            <h3 style="color: var(--gold); margin-bottom: 20px;">ü©∫ Doctor's Prescription for a Perfect Evening</h3>
            <div style="text-align: left; display: inline-block;">
              <div style="margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <strong>Step 1:</strong> Order your favorite takeout from [Place She Likes]
              </div>
              <div style="margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <strong>Step 2:</strong> Put on the comfiest clothes you own
              </div>
              <div style="margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <strong>Step 3:</strong> Make a premium hot tea or fancy store-bought hot chocolate
              </div>
              <div style="margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <strong>Step 4:</strong> Text me a picture of your cozy setup
              </div>
            </div>
            <p style="margin-top: 20px; font-style: italic;">My rating of your cozy skills: 10/10 always! ü•∞</p>
          </div>
        `,
      },

      // ... keep the rest of your existing days 8-24 content as they were
      8: {
        title: "Day 8 ‚Äì Animal therapy break",
        emoji: "üêæ",
        html: `
          <div style="text-align:center; margin-bottom: 12px;">
            <img src="photo-8.jpg" alt="Cute animal photo"
                 style="max-width:100%; border-radius:14px; display:block; margin:0 auto 8px;">
          </div>
          <p>Today is for soft fur and silly faces.</p>
          <p>Look at a cute animal picture (this one, or one of your dogs üê∂), and imagine you're squishing their little face.</p>
          <p style="margin-top:10px;">Bonus points if you actually go cuddle a dog today. Or send me a dog photo. Or both. üòå</p>
        `,
      },

      // ... include all your other days 9-24 here
    };

    // --- Build calendar dynamically ---
    const grid = document.getElementById("calendarGrid");
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalClose = document.getElementById("modalClose");
    const modalTitleText = document.getElementById("modalTitleText");
    const modalEmoji = document.getElementById("modalEmoji");
    const modalBody = document.getElementById("modalBody");
    const modalDayLabel = document.getElementById("modalDayLabel");
    const modalBadge = document.getElementById("modalBadge");
    const todayText = document.getElementById("todayText");

    const today = new Date();
    const currentDay = today.getDate();
    const currentMonth = today.getMonth() + 1; // 1‚Äì12

    // CHANGED: Force current month behavior for testing (remove this line for December)

    todayText.textContent = `Today: ${today.toLocaleDateString(undefined, {
      day: "numeric",
      month: "short",
      year: "numeric",
    })}`;

    const totalDoors = 24;
    const days = Array.from({ length: totalDoors }, (_, i) => i + 1);

    // Shuffle doors
    for (let i = days.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [days[i], days[j]] = [days[j], days[i]];
    }

    const specialDays = new Set([1, 6, 24]);

    function randomSizeClass() {
      const options = ["door--size-s", "door--size-wide", "door--size-tall"];
      const idx = Math.floor(Math.random() * options.length);
      return options[idx];
    }

    for (const day of days) {
      const door = document.createElement("button");
      door.className = "door";
      door.setAttribute("type", "button");
      door.dataset.day = String(day);

      // background image for the door tile
      door.style.backgroundImage = `url("door-${day}.jpg")`;

      const isPast = isAdventMonth && day < currentDay;
      const isToday = isAdventMonth && day === currentDay;
      const available = isAdventMonth && day <= currentDay;

      door.classList.add(available ? "available" : "locked");
      if (isPast) door.classList.add("past");

      if (specialDays.has(day)) {
        door.classList.add("door--size-big");
      } else {
        door.classList.add(randomSizeClass());
      }

      let statusIcon = "üîí";
      let statusText = "Locked";
      let tagText = "Soon";

      if (available) {
        statusIcon = "üîì";
        if (isPast) {
          statusText = "Opened";
          tagText = "Earlier";
        } else if (isToday) {
          statusText = "Today";
          tagText = "Open me";
        }
      }

      door.innerHTML = `
        <div class="door-number">${day}</div>
        <div class="door-label">Day ${day}</div>
        <div class="door-footer">
          <div class="door-status">
            <span class="icon">${statusIcon}</span>
            <span>${statusText}</span>
          </div>
          <div class="door-tag">${tagText}</div>
        </div>
      `;

      if (available) {
        door.addEventListener("click", () => openDoor(day));
      }

      grid.appendChild(door);
    }

    function openDoor(day) {
      const content = doorContent[day] || {
        title: `Day ${day}`,
        emoji: "üéÅ",
        html: "<p>No content defined yet. Add something fun here!</p>",
      };

      modalTitleText.textContent = content.title;
      modalEmoji.textContent = content.emoji;
      modalBody.innerHTML = content.html;
      modalDayLabel.textContent = `Door ${day}`;
      modalBadge.textContent =
        day < currentDay ? "Previously opened" : "Today's door";

      modalBackdrop.classList.add("visible");

      // Re-initialize any interactive elements in the modal
      if (day === 1) {
        setTimeout(() => {
          const secretInput = document.getElementById('secretInput');
          const loveMessage = document.getElementById('loveMessage');
          if (secretInput && loveMessage) {
            secretInput.addEventListener('input', function(e) {
              if (e.target.value.toLowerCase() === 'i love you') {
                loveMessage.play();
                e.target.style.borderColor = '#22c55e';
                e.target.style.background = 'rgba(34, 197, 94, 0.1)';
              }
            });
          }
        }, 100);
      }
    }

    function closeModal() {
      modalBackdrop.classList.remove("visible");
    }

    modalClose.addEventListener("click", closeModal);
    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) closeModal();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });
  </script>
</body>
</html>
